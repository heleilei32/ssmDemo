<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.dc.dao.sys.SysUserorderMapper">
    <resultMap id="BaseResultMap" type="com.dc.entity.sys.pojo.SysUserorder">
        <!--
          WARNING - @mbg.generated
        -->
        <id column="c_id" property="id" jdbcType="INTEGER"/>
        <result column="c_userID" property="userid" jdbcType="VARCHAR"/>
        <result column="c_order_result" property="orderResult" jdbcType="INTEGER"/>
        <result column="c_order_time" property="orderTime" jdbcType="TIMESTAMP"/>
        <result column="c_order_number" property="orderNumber" jdbcType="VARCHAR"/>
        <result column="c_order_detail" property="orderDetail" jdbcType="VARCHAR"/>
    </resultMap>

    <!-- 把数据库和bean里面进行映射 -->
    <resultMap type="com.dc.entity.sys.dto.TimeInterval" id="timeIntervalMap">
        <result property="hours" column="myHour" />
        <result property="count" column="myCount" />
    </resultMap>


    <!-- 查询24小时的时间间隔数据 -->
    <select id="select24TimeInterval" resultMap="timeIntervalMap">
        select date_format( c_order_time, "%H" ) as myHour,count(*) as myCount
        from sys_user_order where
        <if test="orderResult != 3">
            c_order_result = #{orderResult} and
        </if>
        c_order_time &gt;= #{beginTime}
        and
        c_order_time &lt;= #{endTime}
        group by date_format( c_order_time, "%H" )
    </select>


    <!-- 查询集合数量 -->
    <select id="allCount" resultType="int">
        select count(*) from sys_user_order where
        <if test="userName != null">
            c_userID like  concat('%',#{userName},'%') and
        </if>
        <if test="orderResult != 3">
            c_order_result = #{orderResult}  and
        </if>
        <if test="orderNumber != null">
            c_order_number like concat('%',#{orderNumber},'%') and
        </if>
        c_order_time &gt;=#{beginTime}  and c_order_time &lt;=#{endTime}
    </select>
</mapper>